<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      lang="ru">

<h:head>
    <link rel="icon" type="image/png" href="${facesContext.externalContext.requestContextPath}/img/favicon.png"></link>
    <link rel="stylesheet" type="text/css" href="${facesContext.externalContext.requestContextPath}/index.css"></link>
    <title>Лабораторная работа №3</title>
    <script
            src="https://code.jquery.com/jquery-3.7.1.js"
            integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
            crossorigin="anonymous"></script>
    <script src="${facesContext.externalContext.requestContextPath}/index.js" charset="utf-8"></script>
</h:head>
<h:body>
    <header style="height: 120px">
        <div>
            <a href="./start.jsf" style="text-decoration: none;"><h2>Лабораторная работа №3</h2></a>
            <h4>Выполнил: Назин Артем Аркадьевич P3207, ИСУ: 365395, вариант: 430333</h4>
        </div>
    </header>
    <h:form>
        <table>
            <tr style="height: 75px">
                <td>Выберите X:</td>
                <td colspan="3">
                    <p:spinner class = "inp_y sp_x"  min="-2" max="2" stepFactor="1" value="#{p_bean.x}"/>
                </td>
                <td></td>
                <td></td>
                <td colspan="4" rowspan="6">
                    <svg width="500"
                         height="500"
                         id="img"
                         xmlns="http://www.w3.org/2000/svg"
                         viewBox="0 0 400 400">
                        <line x1="0" y1="50%" x2="100%" y2="50%" stroke="#111111"></line>
                        <line x1="50%" y1="0" x2="50%" y2="100%" stroke="#111111"></line>
                        <text x="88%" y="57%" class="graph_R">R</text>
                        <line x1="90%" y1="52%" x2="90%" y2="48%" stroke="#111111"></line>
                        <text x="68%" y="57%" class="graph_R2">R/2</text>
                        <line x1="70%" y1="52%" x2="70%" y2="48%" stroke="#111111"></line>
                        <text x="28%" y="57%" class="graph_MR2">-R/2</text>
                        <line x1="30%" y1="52%" x2="30%" y2="48%" stroke="#111111"></line>
                        <text x="8%" y="57%" class="graph_MR">-R</text>
                        <line x1="10%" y1="52%" x2="10%" y2="48%" stroke="#111111"></line>
                        <text x="53%" y="11%" class="graph_R">R</text>
                        <line x1="48%" y1="10%" x2="52%" y2="10%" stroke="#111111"></line>
                        <text x="53%" y="31%" class="graph_R2">R/2</text>
                        <line x1="48%" y1="30%" x2="52%" y2="30%" stroke="#111111"></line>
                        <text x="53%" y="71%" class="graph_MR2">-R/2</text>
                        <line x1="48%" y1="70%" x2="52%" y2="70%" stroke="#111111"></line>
                        <text x="53%" y="91%" class="graph_MR">-R</text>
                        <line x1="48%" y1="90%" x2="52%" y2="90%" stroke="#111111"></line>
                        <text x="53%" y="4%">x</text>
                        <text x="97.5%" y="55.5%">y</text>
                        <path d="M 385 195 l 15 5 l -15 5 z" stroke="#111111" fill="#111111"></path>
                        <path d="M 205 15 l -5 -15 l -5 15 z" stroke="#111111" fill="#111111"></path>
                        <path d="M 200 200 L 120 200 A 80 80 0 0 0 200 280 Z" fill-opacity="0.4" stroke="#111111"
                              fill="blue" stroke-width="2"></path>
                        <path d="M 200 200 L 200 40 L 40 40 L 40 200 Z" fill-opacity="0.4" stroke="#111111" fill="blue"
                              stroke-width="2"></path>
                        <path d="M 200 200 L 280 200 L 200 40 Z" fill-opacity="0.4" stroke="#111111" fill="blue"
                              stroke-width="2"></path>
                    </svg>
                </td>
            </tr>
            <tr style="height: 75px">
                <td>Набирите Y:</td>
                <td colspan="3">
                    <!--<h:inputText id="YY" class="inp_y com_y" value="#{p_bean.y}"  required="true">
                        <f:validateDoubleRange minimum="-5" maximum="5"/>
                    </h:inputText>-->
                    <h:inputText
                            id="YY"
                            class="inp_y com_y"
                            value="#{p_bean.y}"
                            required="true"
                            validatorMessage="Y должно быть числом от -5 до 5"
                            converterMessage="Y должно быть числом!!!">
                        <f:validateDoubleRange minimum="-5" maximum="5"/>
                    </h:inputText>
                </td>
            </tr>
            <tr style="height: 75px">
                <td>Выберите R:</td>
                <td colspan="3">
                    <p:spinner class = "inp_y sp_r"  min="1" max="3" stepFactor="0.5" value="#{p_bean.r}">
                        <p:ajax update="displayData" />
                    </p:spinner>
                </td>
                <td></td>
                <td></td>

            </tr>
            <tr style="height: 75px">
                <td></td>
                <td colspan="3">
                    <h:commandButton id="submit" ajax="true" class= "frm_submit" value="Отправить" action="#{p_bean.addPoint()}" update="displayData"/>
                </td>
            </tr>
            <tr style="height: 75px">
                <td></td>
                <td colspan="3">
                    <!--<h:commandButton ajax="true"/>-->
                    <h:commandButton ajax="true" class= "frm_reset" value="Сброс" action="#{p_bean.clearPoints()}" update="displayData"/>
                </td>
            </tr>
            <tr style="height: 75px">
                <td></td>
                <td colspan="3">
                    <h:message for="YY" id="row_res" class="row_res" showSummary="true" showDetail="false"/>
                </td>
            </tr>
            <tr style="height: 75px">
                <td>Всего создано точек:</td>
                <td colspan="3">
                    <h:outputText value="#{c.counterAll}"/>
                </td>
            </tr>
            <tr style="height: 75px">
                <td>Попаданий в область:</td>
                <td colspan="3">
                    <h:outputText value="#{c.counterSuccess}"/>
                </td>
            </tr>

            <tr style="height: 75px">
                <td>Текущая площадь закрашенной фигуры:</td>
                <td colspan="3">
                    <h:outputText value="#{a.area}"/>
                </td>
            </tr>
            <tr style="height: 75px; color: crimson;">
                <td colspan="4">
                    <h:outputText value="#{c.counterMissesComment}"/>
                </td>
            </tr>
            <tr>
                <td></td>
                <td colspan="3">
                    <div id="res_table_div">
                        <table id="res_table">
                            <thead>
                                <td>X</td>
                                <td>Y</td>
                                <td>R</td>
                                <td>Результат</td>
                            </thead>
                        </table>
                    </div>
                </td>
            </tr>
        </table>
    </h:form>
    <h:panelGroup id="displayData">
        <h:outputScript>
            update(#{p_bean.points})
        </h:outputScript>
    </h:panelGroup>
</h:body>
</html>